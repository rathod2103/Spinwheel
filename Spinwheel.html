<!DOCTYPE html><html lang="en"><head>  <meta charset="UTF-8" />  <meta name="viewport" content="width=device-width, initial-scale=1.0" />  <title>One-Time Spin Wheel Offer</title>  <style>    body {      display: flex;      flex-direction: column;      align-items: center;      justify-content: center;      min-height: 100vh;      background: #f4f4f4;      font-family: sans-serif;      margin: 0;      padding: 20px;    }    .wheel-container {      position: relative;      width: 300px;      height: 300px;    }    canvas {      border-radius: 50%;      border: 5px solid #000;    }    .pointer {      position: absolute;      top: -20px;      left: 50%;      transform: translateX(-50%);      width: 0;      height: 0;      border-left: 20px solid transparent;      border-right: 20px solid transparent;      border-bottom: 40px solid red;    }    button {      margin: 20px 10px;      padding: 10px 20px;      font-size: 16px;      cursor: pointer;    }    #editOffers {      text-align: center;      margin-top: 20px;    }    #editOffers input[type="text"] {      width: 300px;      padding: 8px;      font-size: 14px;    }  </style></head><body>  <div class="wheel-container">    <div class="pointer"></div>    <canvas id="wheelCanvas" width="300" height="300"></canvas>  </div>    <button id="spinButton">Spin the Wheel</button>  <h2 id="result"></h2>    <div id="editOffers">    <h3>Edit Offers (Comma Separated):</h3>    <input type="text" id="offersInput" value="10% Off, Free Shipping, Buy 1 Get 1, 20% Off, Lucky Prize, Try Again" />    <br />    <button id="updateOffersButton">Update Offers</button>  </div>    <script>    // Flag to allow only one spin per session    let hasSpun = localStorage.getItem('hasSpun') === 'true';        // Get offers from input (as comma-separated values)    let offers = document.getElementById("offersInput").value.split(",");        // Set up canvas and context    const canvas = document.getElementById("wheelCanvas");    const ctx = canvas.getContext("2d");    const spinButton = document.getElementById("spinButton");    const resultDisplay = document.getElementById("result");    const updateOffersButton = document.getElementById("updateOffersButton");        // Draw the wheel segments based on offers    function drawWheel() {      const numSegments = offers.length;      const segmentAngle = 2 * Math.PI / numSegments;      // Color palette (will repeat if more segments)      const colors = ['#ff5733','#33ff57','#3357ff','#f4c542','#ff33aa','#57fff3','#a1c349','#d91e18'];            ctx.clearRect(0, 0, canvas.width, canvas.height);            for(let i = 0; i < numSegments; i++) {        const startAngle = i * segmentAngle;        const endAngle = startAngle + segmentAngle;        ctx.beginPath();        ctx.moveTo(canvas.width/2, canvas.height/2);        ctx.arc(canvas.width/2, canvas.height/2, canvas.width/2, startAngle, endAngle);        ctx.fillStyle = colors[i % colors.length];        ctx.fill();        ctx.save();                // Add offer text to the segment        ctx.translate(canvas.width/2, canvas.height/2);        ctx.rotate(startAngle + segmentAngle/2);        ctx.textAlign = "right";        ctx.fillStyle = "#fff";        ctx.font = "bold 14px sans-serif";        ctx.fillText(offers[i].trim(), canvas.width/2 - 10, 10);        ctx.restore();      }    }        drawWheel();        // Spin the wheel only once per session    function spinWheel() {      if(hasSpun) {        resultDisplay.innerText = "You have already spun the wheel!";        return;      }            hasSpun = true;      localStorage.setItem('hasSpun', 'true');            // Random degree ensures several full rotations (1800-3600)      let randomDegree = Math.floor(1800 + Math.random() * 1800);      canvas.style.transition = "transform 4s ease-out";      canvas.style.transform = `rotate(${randomDegree}deg)`;            // Determine winning segment after the spin animation      setTimeout(() => {        let finalDegree = randomDegree % 360;        let segmentSize = 360 / offers.length;        // Adjust the index so that 0 degree is at the top of the wheel        let prizeIndex = Math.floor((360 - finalDegree) / segmentSize) % offers.length;        resultDisplay.innerText = `You won: ${offers[prizeIndex].trim()}`;      }, 4000);    }        spinButton.addEventListener("click", spinWheel);        // Update the offers array and re-draw the wheel.    updateOffersButton.addEventListener("click", () => {      offers = document.getElementById("offersInput").value.split(",");      drawWheel();      resultDisplay.innerText = "Offers updated. Ready to spin!";      // Reset spin for testing or new session      hasSpun = false;      localStorage.removeItem('hasSpun');      canvas.style.transform = `rotate(0deg)`;    });  </script></body></html>